## Issue #44 - Sticky clip section headers in video editor
- Added CSS sticky positioning to ClipSectionDivider component
- When scrolling through the timeline, the current section header now sticks to the top of the viewport
- Implementation: Added `sticky top-0 z-10 bg-gray-900` classes to ClipSectionDivider button
- Background color ensures section header obscures content scrolling underneath
- z-index ensures section header stays on top of clips
- Key decision: Used native CSS sticky positioning rather than JavaScript scroll listeners for better performance
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:1465

## Issue #47 - Selective section inclusion in Write Article page
- Added ability to selectively include/exclude clip sections in AI prompts
- Write page now shows section checkboxes (only visible when video has clip sections)
- Each section checkbox shows word count for that section
- Main transcript toggle still works - can turn entire transcript off/on
- Implementation details:
  - Loader calculates word count per section while building transcript
  - Added `sectionsWithWordCount` array with id, name, order, and wordCount
  - Added `enabledSections` state (Set<string>) - defaults to all sections enabled
  - Added ScrollArea with section checkboxes showing name and word count
  - Updated completions endpoint schema to accept `enabledSections: string[]`
  - Updated `acquireTextWritingContext` to accept and filter by `enabledSections`
  - Transcript building now filters clips based on enabled sections
  - Maintains section headers (H2) for enabled sections only
- Key decisions:
  - Used same ASCII ordering logic as video editor for consistency
  - Clips before first section are included if no sections exist or all enabled
  - Section filtering works independently from file selection
  - Word counts calculated in loader to avoid recalculation on every render
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/videos.$videoId.write.tsx (loader, UI, state, handler)
  - app/routes/videos.$videoId.completions.ts (schema, action)
  - app/services/text-writing-agent.ts (acquireTextWritingContext signature and logic)

## Issue #48 - Fixed section checkboxes overflowing into file tree
- Fixed visual bug where section checkboxes were overlapping with files in context
- Changed ScrollArea from `max-h-48` to fixed `h-48` height
- Wrapped ScrollArea in container with `shrink-0` to prevent height collapse
- Key decisions:
  - Fixed height ensures consistent layout and prevents overflow
  - shrink-0 prevents flex container from collapsing the section area
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/videos.$videoId.write.tsx:501-502

## Issue #49 - Transcript checkbox controls section checkboxes
- Implemented parent-child checkbox relationship between transcript and sections
- Transcript checkbox now shows indeterminate state when some sections selected
- Clicking transcript checkbox toggles all section checkboxes
- Implementation details:
  - Transcript checkbox state derived from enabledSections count when sections exist
  - Shows true when all sections enabled, indeterminate when some enabled, false when none
  - Clicking transcript checkbox sets/clears all sections at once
  - Section checkboxes indented with pl-6 to show parent-child relationship visually
  - Submit handler derives includeTranscript from enabledSections when sections exist
- Key decisions:
  - Matches FileTree behavior for nested folder checkboxes (indeterminate state)
  - Maintains backward compatibility for videos without sections (uses includeTranscript state)
  - Visual indentation makes hierarchy clear to users
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/videos.$videoId.write.tsx:483-553

## Issue #50 - Remove smooth scroll when clicking section links in video editor
- Changed scroll behavior from "smooth" to "instant" when clicking section links in sidebar
- When clicking a section in the sidebar, the timeline now scrolls instantly to that section
- Key decision: Changed window.scrollTo behavior property from "smooth" to "instant" for immediate navigation
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:867

## Issue #51 - Fix section scrolling broken by Issue #50
- Fixed regression where clicking section links in sidebar stopped working
- Root cause: Section frontendIds change on every re-render, so getElementById couldn't find the element after dispatch triggered re-render
- Solution: Use section index instead of ID to find elements, since order is stable
- Implementation details:
  - Changed from getElementById with dynamic ID to querySelectorAll with index lookup
  - Wrapped scroll in requestAnimationFrame to wait for React re-render to complete
  - Restored smooth scroll behavior (behavior: "smooth") for better UX
  - Changed block positioning to "center" instead of "start" for better visibility
- Key decisions:
  - Index-based lookup is more robust than ID-based when IDs are unstable
  - requestAnimationFrame ensures DOM is updated before scrolling
  - Smooth scroll provides better user experience than instant scroll
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:850-870

## Issue #50 - Remove smooth scroll when clicking section links (re-implementation)
- Changed scroll behavior from "smooth" to "instant" when clicking section links in sidebar
- When clicking a section in the sidebar, the timeline now scrolls instantly to that section
- This reverses the smooth scroll behavior that was restored in Issue #51
- Key decision: Changed scrollIntoView behavior property from "smooth" to "instant" for immediate navigation as requested in issue #50
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:866

## Issue #52 - Repo Archiving (Part 1: Database and API infrastructure)
- Added `archived` boolean field to repos table schema (defaults to false)
- Created POST /api/repos/:repoId/archive endpoint to toggle archive status
- Updated `getRepos()` to filter out archived repos (only returns non-archived)
- Added `getArchivedRepos()` query function to fetch archived repos
- Added `updateRepoArchiveStatus()` method to DBService
- Implementation details:
  - Used same pattern as existing clip/clipSection archiving
  - Archive endpoint accepts `{ archived: true|false }` body
  - Database schema change requires `npm run db:push` in production
- Key decisions:
  - Archive field with default false ensures backward compatibility
  - Separate query functions for active vs archived repos keeps code clear
  - Archive is soft delete - repos remain in database
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/db/schema.ts:40 (added archived field)
  - app/services/db-service.ts:930-945 (updated getRepos, added getArchivedRepos)
  - app/services/db-service.ts:1344-1365 (added updateRepoArchiveStatus)
  - app/routes/api.repos.$repoId.archive.ts (new endpoint)

## Issue #52 - Repo Archiving (Part 2: UI implementation)
- Added right-click context menu to repo items in sidebar with "Archive" option
- Created `/archived-repos` page route to display archived repos
- Added "Archived Repos" link to sidebar navigation
- Implementation details:
  - Wrapped repo buttons in ContextMenu with ContextMenuTrigger
  - Added archiveRepoFetcher to submit archive requests
  - Created new archived-repos.tsx route with loader to fetch archived repos
  - Archive page shows repo name and filePath with "Unarchive" button
  - Added Archive icon import from lucide-react
  - Sidebar link placed between Videos collapsible and Diagram Playground
- Key decisions:
  - Used existing ContextMenu pattern from lessons/videos for consistency
  - Archive context menu item submits to /api/repos/:repoId/archive endpoint
  - Unarchive button on archived page sets archived: false via same endpoint
  - Empty state message when no archived repos exist
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/_index.tsx:51,267,329-364,410-416 (added Archive icon, archiveRepoFetcher, context menu, sidebar link)
  - app/routes/archived-repos.tsx (new page)

## Issue #53 - Fix repo archiving 400 error
- Fixed bug where archiving/unarchiving repos returned 400 error
- Root cause: UI was submitting archived as string ("true"/"false") but schema expected boolean
- Solution: Updated schema to accept string literals "true"/"false" and transform to boolean
- Implementation details:
  - Changed schema from `Schema.Boolean` to `Schema.Literal("true", "false").pipe(Schema.transform(Schema.Boolean, ...))`
  - Transform decodes "true" to true and "false" to false
  - Transform encodes boolean back to string literal for type safety
- Key decision: Fix schema to accept form data strings rather than changing UI to convert strings to booleans
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/api.repos.$repoId.archive.ts:8-15

## Issue #56 - Show sidebar on archived repos page
- Added full sidebar structure to archived repos page matching main index page
- Root cause: archived-repos.tsx only rendered content without sidebar wrapper
- Implementation details:
  - Added sidebar with Repos and Videos collapsible sections
  - Repos section shows all non-archived repos with archive context menu
  - Videos section shows standalone videos with add video button
  - Added Archived Repos and Diagram Playground navigation links
  - Loader now fetches repos and standaloneVideos in addition to archivedRepos
  - Added necessary state management (isAddRepoModalOpen, isAddStandaloneVideoModalOpen)
  - Added modals for adding repos and videos (AddRepoModal, AddStandaloneVideoModal)
  - Sidebar maintains consistent navigation experience across pages
- Key decisions:
  - Duplicated sidebar structure instead of extracting component to keep task simple and focused
  - Used same layout pattern as _index.tsx (flex container with sidebar and main content)
  - Repos in sidebar navigate to main index page with repoId query param
  - Archive functionality works from sidebar context menu on archived repos page
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/archived-repos.tsx:1-257

## Issue #55 - Move archived repos link under repos section in sidebar
- Moved "Archived Repos" link from standalone section to inside Repos collapsible section
- Updated both _index.tsx and archived-repos.tsx for consistency
- Implementation details:
  - Changed from standalone Link with custom styling to Button inside CollapsibleContent
  - Archived Repos now appears after the list of repos within the Repos section
  - Styled as muted text like "View All Videos" to indicate it's a navigation link
  - Removed the standalone "Archived Repos" section that was at the same level as "Diagram Playground"
  - Now follows visual hierarchy: repos listed first, then archived repos link at bottom of section
- Key decisions:
  - Used Button component with ghost variant matching "View All Videos" pattern
  - Maintains ml-6 indentation consistent with other items in CollapsibleContent
  - Archive icon size changed from w-5 h-5 to w-4 h-4 with mr-2 spacing for consistency
  - Link now collapses/expands with the Repos section
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/_index.tsx:367-377,421-428
  - app/routes/archived-repos.tsx:135-145,181-188

## Issue #57 - Remove add repo button from sidebar
- Removed the Plus icon button from Repos section header in sidebar
- Updated both _index.tsx and archived-repos.tsx for consistency
- Implementation details:
  - Removed the Button with Plus icon that was next to "Repos" CollapsibleTrigger
  - Removed the wrapping div with "flex items-center justify-between" layout
  - CollapsibleTrigger now stands alone without the add button
  - AddRepoModal component and state management remain for other entry points (e.g., empty state in main content)
- Key decisions:
  - Kept the AddRepoModal functionality intact - can still be triggered from other UI locations
  - Simplified Repos section header to just the collapsible trigger
  - Users can still add repos via the empty state button in the main content area
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/_index.tsx:311-315
  - app/routes/archived-repos.tsx:79-83

## Issue #54 - Add archive/unarchive to actions menu on repo page
- Added Archive/Unarchive option to Actions dropdown menu on repo page
- Menu item dynamically shows "Archive Course" or "Unarchive Course" based on current state
- Implementation details:
  - Added new DropdownMenuItem in Course section of Actions menu
  - Uses existing archiveRepoFetcher to submit to /api/repos/:repoId/archive endpoint
  - Conditionally toggles archived state: sends "true" if not archived, "false" if archived
  - Menu text changes based on currentRepo.archived property
  - Description changes: "Hide course from main view" when archiving, "Restore course to active repos" when unarchiving
  - Uses Archive icon from lucide-react
- Key decisions:
  - Placed in Course section alongside other course-level actions (Rename, Rewrite Path)
  - Dynamic text provides clear indication of current state and action
  - Uses same API endpoint and pattern as sidebar context menu for consistency
  - No confirmation dialog (matches other menu actions like rename)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/_index.tsx:550-573

## Issue #59 - Make archived repo names clickable to navigate to repo view
- Made repo names on archived repos page clickable to navigate to repo view
- Implementation details:
  - Changed repo name from plain h3 text to Button with variant="link"
  - onClick handler navigates to `/?repoId=${repo.id}` with preventScrollReset
  - Styled with "h-auto p-0 font-medium text-base" to maintain heading appearance
  - Uses same navigation pattern as sidebar repo buttons
- Key decisions:
  - Used Button component for consistency with rest of app navigation
  - link variant provides underline-on-hover behavior typical of links
  - Maintains font-medium styling to preserve visual hierarchy
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/archived-repos.tsx:219-229

## Issue #60 - Restore + button next to Repos, confirm removal of large Add repo button
- Restored the + icon button next to "Repos" in sidebar header on both pages
- Confirmed that large "Add Repo" button at bottom (below Separator) is already removed
- Implementation details:
  - Added back the wrapper div with "flex items-center justify-between" layout
  - Added Plus icon button (h-7 w-7, ghost variant) that opens AddRepoModal
  - Matches the Videos section pattern for consistency
  - Updated both _index.tsx and archived-repos.tsx
- Key decisions:
  - The large wide "Add Repo" button was previously removed from sidebar bottom
  - Small + icon provides quick access while maintaining clean UI
  - Consistent pattern across Repos and Videos sections
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/_index.tsx:311-325
  - app/routes/archived-repos.tsx:79-93

## Issue #58 - Extract sidebar into shared component
- Created AppSidebar component to eliminate duplication between pages
- Sidebar was duplicated between _index.tsx and archived-repos.tsx
- Implementation details:
  - Created app/components/app-sidebar.tsx with all sidebar logic
  - Component accepts repos, standaloneVideos, selectedRepoId, and modal state as props
  - Repos, Videos, and Diagram Playground navigation in shared component
  - Archive functionality and modals included in component
  - Updated both _index.tsx and archived-repos.tsx to use AppSidebar
  - Removed duplicate sidebar code (140+ lines per file)
  - Cleaned up unused imports (Collapsible, Separator, various icons)
- Key decisions:
  - Navigation to repos uses absolute path (/?repoId=) for consistency across pages
  - All modal state management remains in parent components for flexibility
  - Component is self-contained with its own archiveRepoFetcher
  - Maintains exact same UI and behavior as before
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/components/app-sidebar.tsx (new file, 213 lines)
  - app/routes/_index.tsx (removed 140 lines, added AppSidebar usage)
  - app/routes/archived-repos.tsx (removed 140 lines, added AppSidebar usage)

## Issue #60 - Remove unwanted Add Repo button from sidebar
- Removed DialogTrigger button from AddRepoModal component that was rendering a large "Add Repo" button
- Removed unnecessary Separator from AppSidebar since there's no content below it
- Root cause: AddRepoModal had both a DialogTrigger button (unintended) and external control via isOpen prop (intended)
- Implementation details:
  - Removed DialogTrigger import from AddRepoModal
  - Removed DialogTrigger JSX wrapper and the "Add Repo" Button it contained
  - Modal is now purely controlled by the isOpen prop, triggered by the + icon in sidebar header
  - Removed unused Separator and its import from AppSidebar component
- Key decisions:
  - DialogTrigger was rendering an unnecessary trigger button when the modal is externally controlled
  - Small + icon button next to "Repos" header remains as the intended way to open the modal
  - Separator removed for cleaner UI without orphaned dividers
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/components/add-repo-modal.tsx:1-36 (removed DialogTrigger import and button)
  - app/components/app-sidebar.tsx:15,183 (removed Separator import and element)
## Issue #61 - Archive Standalone Videos
- Added archive functionality for standalone videos mirroring the existing archive repos feature
- Archived videos are hidden from sidebar but accessible in view-all-videos page in separate section
- Database and API infrastructure:
  - Added `archived` boolean field to videos table schema (defaults to false)
  - Created POST /api/videos/:videoId/archive endpoint with lessonId verification
  - Endpoint verifies video is standalone (lessonId is NULL) before allowing archive
  - Updated getStandaloneVideos() to filter out archived videos (only returns non-archived)
  - Added getArchivedStandaloneVideos() query function for archived videos
  - Added updateVideoArchiveStatus() method to DBService with lessonId verification
  - Created CannotArchiveLessonVideoError for attempting to archive lesson-attached videos
- UI implementation:
  - Added archive context menu to sidebar standalone videos (right-click to archive)
  - Updated view-all-videos page to load both non-archived and archived videos
  - Non-archived videos shown at top, archived videos in separate section below
  - Archive/Unarchive option in context menu on view-all-videos page
  - Archived section hidden when there are no archived videos
  - Archive icon imported from lucide-react
- Key decisions:
  - Archive is soft delete - videos remain in database with archived flag
  - Lesson-attached videos are protected from archiving at API level
  - Clips and clip sections within archived videos retain their own archive state independently
  - Used same pattern as repos archiving (string "true"/"false" schema transform to boolean)
  - No separate "Archived Videos" page needed (unlike repos)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/db/schema.ts:119 (added archived field to videos table)
  - app/services/db-service.ts:650,664-679,967,1418-1422 (updated getStandaloneVideos, added getArchivedStandaloneVideos and updateVideoArchiveStatus)
  - app/services/db-service-errors.ts:39-44 (added CannotArchiveLessonVideoError)
  - app/routes/api.videos.$videoId.archive.ts (new endpoint)
  - app/components/app-sidebar.tsx:53,152-179 (added archive context menu to sidebar videos)
  - app/routes/videos._index.tsx:17,19,32,45,59,65,143-172,174-236 (added archived videos section and context menus)

## Issue #62 - Remove archive icon from archived repos link
- Removed Archive icon from "Archived Repos" link in sidebar
- Link now displays just text without icon for cleaner appearance
- Key decision: Keeps visual hierarchy clean and reduces icon clutter
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/components/app-sidebar.tsx:124

## Issue #63 - Make Videos section default open in sidebar
- Added defaultOpen attribute to Videos Collapsible component in sidebar
- Videos section now expands by default matching Repos section behavior
- Key decision: Improves discoverability of standalone videos in sidebar
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/components/app-sidebar.tsx:132

## Issue #64 - Progressive Disclosure Refactor - Phase 1: Extract clip-utils.ts
- Extracted clip utility functions from video-editor.tsx into new clip-utils.ts file
- Moved calculateTextSimilarity, isClip, and isClipSection functions
- Implementation details:
  - Created app/features/video-editor/clip-utils.ts with 3 utility functions
  - calculateTextSimilarity uses Levenshtein distance to calculate text similarity percentage
  - isClip and isClipSection are type guards for TimelineItem discrimination
  - Added JSDoc comments for better documentation
  - Updated video-editor.tsx to import from clip-utils instead of defining locally
  - Removed unused ClipSection type import from video-editor.tsx
- Key decisions:
  - Created separate clip-utils.ts file instead of adding to existing utils.ts
  - Maintained all existing function signatures and behavior (no breaking changes)
  - Type guards remain as arrow functions for consistency with existing code style
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/clip-utils.ts (new file)
  - app/features/video-editor/video-editor.tsx:33-34,63-76 (removed function definitions, added import)

## Issue #64 - Progressive Disclosure Refactor - Phase 1: Create types.ts files
- Created types.ts files in video-editor and article-writer feature directories
- Extracted type definitions to reduce inline complexity in large TSX files
- Implementation details:
  - Created app/features/video-editor/types.ts with 4 type definitions:
    - ClipSectionNamingModal: State for clip section naming modal (create/edit/add-at modes)
    - ClipComputedProps: Map of clip IDs to computed properties (timecode, Levenshtein)
    - ClipSectionDividerProps: Props for ClipSectionDivider component
    - LiveMediaStreamProps: Props for LiveMediaStream component
  - Created app/features/article-writer/types.ts with 3 type definitions:
    - SectionWithWordCount: Clip sections with word counts for UI display
    - Mode: Writing mode for article writer (extends TextWritingAgentMode)
    - Model: AI model selection (Sonnet 4.5 or Haiku 4.5)
  - Updated video-editor.tsx to import and use types from types.ts
  - Updated videos.$videoId.write.tsx to import and use types from types.ts
  - Removed inline type definitions from both files
- Key decisions:
  - Prioritized types used by multiple functions or representing core data structures
  - Added JSDoc comments for better documentation
  - _index.tsx does not need types.ts (uses inferred types from database queries)
  - Kept types within feature directories for better organization
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/types.ts (new file)
  - app/features/article-writer/types.ts (new file)
  - app/features/video-editor/video-editor.tsx:34-39,278-279,390,1429-1431,1456 (added import, updated type usage)
  - app/routes/videos.$videoId.write.tsx:5,146,279 (added import, removed inline types)

## Issue #64 - Progressive Disclosure Refactor - Phase 2: Extract timeline-indicators.tsx
- Extracted small presentational components from video-editor.tsx into timeline-indicators.tsx
- Moved InsertionPointIndicator, BeatIndicator, and RecordingSignalIndicator components
- Implementation details:
  - Created app/features/video-editor/components/timeline-indicators.tsx with 3 components
  - InsertionPointIndicator: Visual indicator showing where new clips will be inserted (blue dashed line with plus icon)
  - BeatIndicator: Visual indicator showing beat/pause between clips (three gray dots)
  - RecordingSignalIndicator: Visual indicator showing recording in progress (pulsing red circle)
  - Added JSDoc comments for better documentation
  - Updated video-editor.tsx to import from timeline-indicators instead of defining locally
  - Removed INSERTION_POINT_ID import from video-editor.tsx (now only used in timeline-indicators)
- Key decisions:
  - Created components/ subdirectory within video-editor feature for extracted components
  - Maintained all existing component signatures and behavior (no breaking changes)
  - Components remain as simple presentational components with no props (except InsertionPointIndicator uses INSERTION_POINT_ID constant)
  - video-editor.tsx reduced from 1,560 to 1,529 lines (31 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/timeline-indicators.tsx (new file, 48 lines)
  - app/features/video-editor/video-editor.tsx:40-44,94 (added import, removed INSERTION_POINT_ID import, removed 3 component definitions)

## Issue #64 - Progressive Disclosure Refactor - Phase 3: Extract hooks
- Extracted keyboard shortcuts and WebSocket logic from video-editor.tsx into custom hooks
- Created hooks/ subdirectory within video-editor feature
- Implementation details:
  - Created app/features/video-editor/hooks/use-keyboard-shortcuts.ts
    - Handles all keyboard shortcuts (Space, Delete, Enter, Arrow keys, l, k, Home, End, b/B)
    - Ignores events when focus is on input fields or textareas
    - Allows keyboard events on buttons with "allow-keydown" class
    - Dispatches appropriate actions to video editor state reducer
  - Created app/features/video-editor/hooks/use-websocket.ts
    - Manages WebSocket connection to Stream Deck forwarder (localhost:5172)
    - Handles 4 message types: delete-last-clip, toggle-last-frame-of-video, toggle-beat, add-clip-section
    - Automatically closes socket on component unmount
    - Uses streamDeckForwarderMessageSchema for message validation
  - Updated video-editor.tsx to use both hooks
  - Removed inline useEffect implementations (~80 lines)
  - Removed unused streamDeckForwarderMessageSchema import
  - Added JSDoc comments to both hooks for better documentation
- Key decisions:
  - Created separate hooks/ directory following RFC structure
  - Hooks maintain all existing behavior (no breaking changes)
  - useWebSocket accepts params object with all required callbacks
  - useKeyboardShortcuts accepts dispatch function directly
  - Hooks called after state initialization to avoid TS errors
  - video-editor.tsx reduced from ~1,529 to ~1,459 lines (70 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/hooks/use-keyboard-shortcuts.ts (new file, 99 lines)
  - app/features/video-editor/hooks/use-websocket.ts (new file, 51 lines)
  - app/features/video-editor/video-editor.tsx:40-47,72-74,195-205 (added imports, removed inline hooks)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract LiveMediaStream component
- Extracted LiveMediaStream component from video-editor.tsx into separate file
- Component displays live video feed with status indicators and speech detection visual feedback
- Implementation details:
  - Created app/features/video-editor/components/live-media-stream.tsx with LiveMediaStream component
  - Component shows recording state indicators (recording, speaking, silence, warming up)
  - Dynamic outline colors based on speech detection state (yellow/green/blue/red)
  - Optional center line guide for camera framing
  - Auto-plays video stream when mounted or stream changes
  - Removed MicIcon and MicOffIcon from video-editor.tsx imports (only used in LiveMediaStream)
  - Removed useEffect and useRef from React imports in video-editor.tsx (no longer needed)
  - Updated video-editor.tsx to import LiveMediaStream from components directory
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component is self-contained with no dependencies on parent state
  - All required data comes through props (mediaStream, obsConnectorState, speechDetectorState, showCenterLine)
  - Maintains all existing behavior and visual styling
  - Created components/ subdirectory within video-editor feature following RFC structure
  - video-editor.tsx reduced from 1,461 to 1,385 lines (76 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/live-media-stream.tsx (new file, 94 lines)
  - app/features/video-editor/video-editor.tsx:34-44,47-70,1366-1438 (removed LiveMediaStreamProps import, added component import, removed unused imports, removed component definition)

## Issue #68 - Add React Compiler to the repo
- Added React Compiler (babel-plugin-react-compiler) to improve memoization and performance
- Configured via vite-plugin-babel since React Router 7 doesn't support babel config in reactRouter plugin
- Implementation details:
  - Installed babel-plugin-react-compiler@1.0.0 and vite-plugin-babel@1.4.1
  - Installed @babel/preset-typescript@7.28.5 for TypeScript support in Babel
  - Added babel plugin to vite.config.ts with filter for .js/.ts/.jsx/.tsx files
  - Configured React Compiler with target: "19" for React 19
  - Babel plugin runs first in the plugin pipeline before tailwindcss and reactRouter
- Key decisions:
  - Used vite-plugin-babel approach as React Router plugin doesn't accept babel config
  - Applied filter /\.[jt]sx?$/ to only process JavaScript and TypeScript files
  - Set target to "19" since project uses React 19.1.0
  - Only enabled in non-test environment (matches existing pattern in vite config)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - package.json (added babel-plugin-react-compiler, vite-plugin-babel, @babel/preset-typescript to devDependencies)
  - vite.config.ts:4,8-18 (added babel import and configuration)
  - pnpm-lock.yaml (updated with new dependencies)

## Issue #67 - Refactor useKeyboardShortcuts hook to use video state reducer type
- Removed duplicate type definition from useKeyboardShortcuts hook
- Hook now uses videoStateReducer.Action type directly from video-state-reducer.ts
- Implementation details:
  - Added import for videoStateReducer type from video-state-reducer.ts
  - Replaced inline union type with videoStateReducer.Action type parameter
  - Removed 16 lines of duplicate type definitions (lines 21-37 replaced with single type reference)
- Key decisions:
  - Single source of truth for action types improves maintainability
  - TypeScript will now catch mismatches if hook dispatches actions not in reducer
  - No runtime behavior changes - purely a type-level refactor
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/hooks/use-keyboard-shortcuts.ts:2,22

## Issue #66 - Standalone videos now show transcript sidebar
- Fixed inconsistent UI treatment between standalone and lesson-connected videos
- Standalone videos now display the left sidebar with video, transcript, and section checkboxes
- Implementation details:
  - Removed conditional rendering that hid sidebar for standalone videos (line 468)
  - Sidebar now always renders with video player and transcript controls
  - File tree conditionally hidden for standalone videos using !isStandalone check (line 542)
  - README dropdown already had !isStandalone check, so no change needed (line 746)
  - Removed duplicate video player from main content area for standalone videos
  - Chat panel now always uses 3/4 width with sidebar taking 1/4 width
- Key decisions:
  - Consistent sidebar treatment across both video types improves UX
  - Transcript and section selection functionality now available for standalone videos
  - File tree and README features remain lesson-specific as they require repo context
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/videos.$videoId.write.tsx:467-552

## Issue #65 - Add intro section button to pre-recording checklist
- Added "Add Intro Section" button at bottom of pre-recording checklist
- Button creates a clip section named "Intro" when clicked
- Implementation details:
  - Added Button component at bottom of checklist (after the ordered list)
  - Button calls props.onAddClipSection("Intro") which creates new section
  - Styled as full-width outline button for visual consistency
  - Added mb-6 margin to ordered list to space it from the button
  - Button only appears when clips.length === 0 (same condition as checklist)
- Key decisions:
  - Section name hardcoded as "Intro" per requirements (not user-editable)
  - Uses existing onAddClipSection handler - no new state management needed
  - Section appears in timeline immediately and can be edited/moved/deleted like any section
  - Checklist remains visible until first clip is added
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:914,928-934

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ExportModal component
- Extracted ExportModal component from video-editor.tsx into separate file
- Component handles video export with optional YouTube/TikTok short title
- Implementation details:
  - Created app/features/video-editor/components/export-modal.tsx with ExportModal component
  - Component includes dialog trigger (DropdownMenuItem) and content
  - Displays form for Short Title input (queues for YouTube/TikTok if provided)
  - Shows YouTube chapters (generated from clip sections) with copy button
  - Uses exportVideoClipsFetcher for form submission
  - Handles modal open/close state through props
  - Displays copy feedback with CheckIcon when chapters are copied
  - Submit button shows loading state during submission
  - Removed DownloadIcon and DialogTrigger from video-editor.tsx imports (no longer needed)
  - Updated video-editor.tsx to import ExportModal and pass all required props
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component is self-contained with all UI logic encapsulated
  - Props include all required callbacks and state (no Context needed)
  - Maintains all existing behavior and visual styling
  - Dialog trigger (DropdownMenuItem) included in component for complete encapsulation
  - video-editor.tsx reduced from 1,392 to 1,308 lines (84 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/export-modal.tsx (new file, 131 lines)
  - app/features/video-editor/video-editor.tsx:3-7,44,47-67,614-707 (added import, removed unused imports, replaced inline modal with component)

## Issue #69 - Fix standalone video article writing
- Fixed bug preventing users from writing articles for standalone videos
- Root cause: acquireTextWritingContext threw error "Cannot write for standalone videos"
- Implementation details:
  - Removed error throw when video has no lesson
  - Added conditional logic to handle standalone videos (no lesson) vs lesson-connected videos
  - For standalone videos: return empty textFiles and imageFiles arrays (no lesson directory to read from)
  - For lesson videos: maintain existing file reading logic
  - Transcript building works for both standalone and lesson videos
  - YouTube chapters work for both video types
  - Return undefined for sectionPath and lessonPath when video is standalone
- Key decisions:
  - Matches the pattern from videos.$videoId.write.tsx loader (lines 169-188)
  - Standalone videos can use transcript for article generation but have no code files
  - No breaking changes to return type (sectionPath/lessonPath now optional)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/services/text-writing-agent.ts:164-257,335-336

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract TableOfContents component
- Extracted TableOfContents component from video-editor.tsx into separate file
- Component displays navigable list of clip sections in sidebar
- Implementation details:
  - Created app/features/video-editor/components/table-of-contents.tsx with TableOfContents component
  - Component renders scrollable list of sections with selection highlighting
  - Clicking a section selects it and scrolls timeline to that section
  - Uses requestAnimationFrame for scroll timing after React re-render
  - Removed unused ScrollArea import from video-editor.tsx
  - Updated video-editor.tsx to import and use TableOfContents component
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives clipSections array, selectedClipsSet, and onSectionClick callback
  - Callback handles both state dispatch and DOM scrolling logic
  - Returns null when no sections exist (same as before)
  - Maintains all existing behavior and visual styling
  - video-editor.tsx reduced from 1,308 to 1,285 lines (23 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/table-of-contents.tsx (new file, 47 lines)
  - app/features/video-editor/video-editor.tsx:24,45,663-689 (added import, removed ScrollArea import, replaced inline implementation with component)

## Issue #71 - LLM should choose its own section headings for articles
- Updated article writing prompt to let LLM choose section headings using video sections as inspiration
- Previously, section names were inserted as H2 headers in the transcript, causing LLM to follow them too closely
- Implementation details:
  - Updated generateArticlePrompt to accept optional sectionNames parameter
  - Added instructions in prompt to use section names as inspiration rather than exact headings
  - Section names now passed separately in prompt, not as H2 headers in transcript
  - Removed H2 header insertion from transcript building in text-writing-agent.ts (line 291-294)
  - Added sectionNames collection in acquireTextWritingContext (lines 328-337)
  - Updated createTextWritingAgent signature to accept sectionNames parameter
  - Passed sectionNames from videoContext to createTextWritingAgent in completions route
- Key decisions:
  - Section names collected based on enabled sections (respects user's section selection)
  - If all sections enabled, includes all section names; otherwise only enabled ones
  - Prompt explicitly tells LLM to "choose headings that best fit the content and flow"
  - Maintains backward compatibility - sectionNames is optional
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/prompts/generate-article.ts:16-51 (added sectionNames param, added section names section in prompt)
  - app/services/text-writing-agent.ts:46-54,107-113,289,328-347 (added sectionNames param to createTextWritingAgent, removed H2 headers, collect and return section names)
  - app/routes/videos.$videoId.completions.ts:64 (pass sectionNames to createTextWritingAgent)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ClipSectionDivider component
- Extracted ClipSectionDivider component from video-editor.tsx into separate file
- Component displays section divider in timeline with sticky positioning
- Implementation details:
  - Created app/features/video-editor/components/clip-section-divider.tsx with ClipSectionDivider component
  - Component shows horizontal line with section name centered
  - Uses sticky positioning to stay visible while scrolling through clips
  - Highlights when selected with outline effect
  - Updated video-editor.tsx to import from components directory
  - Removed React import from video-editor.tsx (no longer needed without React.forwardRef)
  - Removed ClipSectionDividerProps import from types (now imported in component file)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component maintains forwardRef for DOM manipulation needs
  - All props and behavior remain unchanged
  - Follows same pattern as other extracted components
  - video-editor.tsx reduced from 1,285 to 1,257 lines (28 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/clip-section-divider.tsx (new file, 42 lines)
  - app/features/video-editor/video-editor.tsx:33-35,45,69,1237-1262 (added import, removed React import, removed ClipSectionDividerProps import, removed component definition)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ClipSectionNamingModal component
- Extracted ClipSectionNamingModal component from video-editor.tsx into separate file
- Component handles modal dialog for creating, editing, or adding clip sections
- Implementation details:
  - Created app/features/video-editor/components/clip-section-naming-modal.tsx with ClipSectionNamingModal component
  - Component supports three modes: create (new section at end), edit (rename existing), add-at (new section before/after item)
  - When dismissed or cancelled in create/add-at mode, automatically uses default name
  - Refactored handlers into separate functions (handleDismiss, handleSubmit, handleCancel) for clarity
  - Updated video-editor.tsx to use new component with cleaner props interface
  - Removed Dialog, DialogContent, DialogHeader, DialogTitle imports (only used by modal)
  - Removed Input and Label imports (only used by modal)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives callbacks as props rather than dispatching internally
  - Modal state management remains in parent component
  - Maintains all existing behavior including default name on dismiss/cancel
  - Props interface is cleaner and more explicit than inline JSX
  - video-editor.tsx reduced from 1,257 to 1,163 lines (94 lines saved)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/clip-section-naming-modal.tsx (new file, 138 lines)
  - app/features/video-editor/video-editor.tsx:1-8,45,696-803 (removed Dialog imports, removed Input/Label imports, added import, replaced inline modal with component)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ActionsDropdown component
- Extracted ActionsDropdown component from video-editor.tsx into separate file
- Component handles the Actions dropdown menu with all export, writing, and utility actions
- Implementation details:
  - Created app/features/video-editor/components/actions-dropdown.tsx with ActionsDropdown component
  - Includes Write Article navigation, Copy Transcript, Copy YouTube Chapters
  - Integrates ExportModal component for video export with short title
  - Includes DaVinci Resolve export action
  - Conditionally shows "Add New Video" option for lesson-attached videos
  - Removed unused imports from video-editor.tsx (DropdownMenu components, Plus, FilmIcon, CopyIcon, CheckIcon, ChevronDown)
  - Removed ExportModal import from video-editor.tsx (now imported within ActionsDropdown)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives all callbacks and state as props (no Context needed)
  - Uses FetcherWithComponents type for proper React Router v7 typing
  - ExportModal remains nested within ActionsDropdown since it's only used there
  - Maintains all existing behavior and visual styling
  - video-editor.tsx reduced from 1,163 to 1,033 lines (130 lines saved)
  - Total reduction so far: 1,592 → 1,033 lines (559 lines saved / 35% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/actions-dropdown.tsx (new file, 176 lines)
  - app/features/video-editor/video-editor.tsx:10-15,28,36-50,507-637 (removed imports, added ActionsDropdown import and usage)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ClipItem component
- Extracted ClipItem component from video-editor.tsx into separate file
- Component renders individual clip in timeline with thumbnail, transcript, and context menu
- Implementation details:
  - Created app/features/video-editor/components/clip-item.tsx with ClipItem component
  - Component displays clip thumbnail (16:9 or 9:16 portrait) with timecode overlay
  - Shows loading spinner during transcription
  - Displays transcript text with Levenshtein distance warning for similar consecutive clips
  - Progress bar overlay when clip is currently playing
  - Context menu with Insert Before/After, Add Section Before/After, Move Up/Down, Toggle Beat, Re-transcribe, Delete
  - Removed unused imports from video-editor.tsx (Loader2, PauseIcon, RefreshCwIcon moved to ClipItem)
  - Kept RefreshCwIcon in video-editor.tsx as it's still used in error overlay
  - Updated video-editor.tsx to use ClipItem component with all required props
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives all state and callbacks as props (no Context needed)
  - Maintains forwardRef pattern for future DOM manipulation needs
  - All behavior preserved including multi-select with Ctrl/Shift keys
  - DANGEROUS_TEXT_SIMILARITY_THRESHOLD constant kept in video-editor.tsx as it's still used there
  - video-editor.tsx reduced from 1,033 to 832 lines (201 lines saved)
  - Total reduction so far: 1,592 → 832 lines (760 lines saved / 48% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/clip-item.tsx (new file, 267 lines)
  - app/features/video-editor/video-editor.tsx:31-47,752-797 (added import, replaced inline clip rendering with component)

## Issue #64 - Progressive Disclosure Refactor - Phase 2: Extract PreRecordingChecklist component
- Extracted PreRecordingChecklist component from video-editor.tsx into separate file
- Component displays pre-recording checklist when no clips exist yet
- Implementation details:
  - Created app/features/video-editor/components/pre-recording-checklist.tsx with PreRecordingChecklist component
  - Component shows checklist of items to verify before recording (close windows, close blinds, check bookshelf)
  - Includes "Add Intro Section" button that calls onAddIntroSection callback
  - Updated video-editor.tsx to import and use PreRecordingChecklist component
  - Removed unused icon imports from video-editor.tsx (CircleQuestionMarkIcon, Columns2, MonitorIcon, UserRound)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives callback as prop (no Context needed)
  - Maintains all existing behavior and visual styling
  - Small, self-contained presentational component
  - video-editor.tsx reduced from 833 to 806 lines (27 lines saved)
  - Total reduction so far: 1,592 → 806 lines (786 lines saved / 49% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/pre-recording-checklist.tsx (new file, 48 lines)
  - app/features/video-editor/video-editor.tsx:32-48,574-603 (added import, removed unused icon imports, replaced inline checklist with component)
## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract VideoPlayerPanel component
- Extracted VideoPlayerPanel component from video-editor.tsx into separate file
- Component displays video preview panel including title, player, live stream, controls, and table of contents
- Implementation details:
  - Created `app/features/video-editor/components/video-player-panel.tsx` with VideoPlayerPanel component
  - Component includes video metadata header (title, duration, repo/lesson path)
  - Manages three view modes: video-player, live-stream, and last-frame
  - Integrates LiveMediaStream component for OBS recording preview
  - Integrates PreloadableClipManager for video playback
  - Shows last frame overlay when appropriate (for recording continuity)
  - Navigation button to go back to lesson/videos list
  - Integrates ActionsDropdown for all export and writing actions
  - Integrates TableOfContents for section navigation
  - Includes AddVideoModal for lesson-attached videos
  - Updated video-editor.tsx to use VideoPlayerPanel component
  - Removed unused imports (AddVideoModal, Tooltip components, LiveMediaStream, TableOfContents, ActionsDropdown, RecordingSignalIndicator, Link, PreloadableClipManager, cn utility)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives all state and callbacks as props (no Context needed)
  - Maintains all existing behavior and visual styling
  - Largest single extraction so far (180+ lines of JSX)
  - video-editor.tsx reduced from 806 to 674 lines (132 lines saved)
  - Total reduction so far: 1,592 → 674 lines (918 lines saved / 58% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/video-player-panel.tsx (new file, 252 lines)
  - app/features/video-editor/video-editor.tsx:1-53,356-426 (removed imports, added VideoPlayerPanel import and usage)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ClipSectionItem component
- Extracted ClipSectionItem component from video-editor.tsx into separate file
- Component displays clip section divider with context menu in the timeline
- Implementation details:
  - Created `app/features/video-editor/components/clip-section-item.tsx` with ClipSectionItem component
  - Component renders ClipSectionDivider with full context menu functionality
  - Context menu includes Insert Before/After, Add Section Before/After, Edit, Move Up/Down, Delete
  - Handles section selection with Ctrl/Shift multi-select support
  - Double-click selected section plays from that section
  - Shows InsertionPointIndicator when insertion point is after this section
  - Updated video-editor.tsx to use ClipSectionItem component
  - Removed unused ContextMenu component imports
  - Removed unused icon imports (ArrowDownIcon, ArrowUpIcon, ChevronLeftIcon, ChevronRightIcon, PencilIcon, PlusIcon, Trash2Icon)
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component receives callbacks as props for modal state management (onEditSection, onAddSectionBefore, onAddSectionAfter)
  - Maintains all existing behavior including multi-select and play-from-section
  - Encapsulates all section-specific UI logic in one place
  - video-editor.tsx reduced from 674 to 561 lines (113 lines saved)
  - Total reduction so far: 1,592 → 561 lines (1,031 lines saved / 65% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/clip-section-item.tsx (new file, 151 lines)
  - app/features/video-editor/video-editor.tsx:1-21,441-479 (removed imports, added ClipSectionItem import and usage)

## Issue #64 - Progressive Disclosure Refactor - Phase 5: Extract ClipTimeline component
- Extracted ClipTimeline component from video-editor.tsx into separate file
- Component displays the main timeline of clips and clip sections
- Implementation details:
  - Created `app/features/video-editor/components/clip-timeline.tsx` with ClipTimeline component
  - Renders pre-recording checklist when no clips exist
  - Handles insertion point indicators (start/end/after-clip positions)
  - Maps over items array to render both clip sections and clips
  - Integrates ClipSectionItem for section rendering with context menu
  - Integrates ClipItem for clip rendering with context menu
  - Shows beat indicators between clips when appropriate
  - All callbacks passed through props for modal state management
  - Component receives generateDefaultClipSectionName function for section naming
  - Updated video-editor.tsx to use ClipTimeline component
  - Removed unused PreRecordingChecklist, InsertionPointIndicator, BeatIndicator imports from video-editor.tsx
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component encapsulates entire timeline rendering logic in one place
  - Props drilling maintained (no Context added)
  - Callbacks simplified - onEditSection, onAddSectionBefore, onAddSectionAfter receive IDs and names directly
  - video-editor.tsx reduced from 561 to 480 lines (81 lines saved)
  - Total reduction so far: 1,592 → 480 lines (1,112 lines saved / 70% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/clip-timeline.tsx (new file, 153 lines)
  - app/features/video-editor/video-editor.tsx:7-16,416-456 (removed imports, added ClipTimeline import and usage)

## Issue #64 - Progressive Disclosure Refactor - Phase 4: Extract ErrorOverlay component
- Extracted ErrorOverlay component from video-editor.tsx into separate file
- Component displays full-screen error overlay when a fatal error occurs
- Implementation details:
  - Created `app/features/video-editor/components/error-overlay.tsx` with ErrorOverlay component
  - Shows warning icon, error message, operation details, and refresh button
  - Removed AlertTriangleIcon and RefreshCwIcon imports from video-editor.tsx
  - Removed Button import from video-editor.tsx (now only used in ErrorOverlay)
  - Updated video-editor.tsx to use ErrorOverlay component
  - Added JSDoc comments for better documentation
- Key decisions:
  - Component is self-contained with clear single responsibility
  - All error display logic encapsulated in one place
  - Maintains all existing behavior and visual styling
  - video-editor.tsx reduced from 481 to 448 lines (33 lines saved)
  - Total reduction so far: 1,592 → 448 lines (1,144 lines saved / 72% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/components/error-overlay.tsx (new file, 48 lines)
  - app/features/video-editor/video-editor.tsx:1-14,295-327 (removed imports, replaced error overlay with component)

## Issue #64 - Progressive Disclosure Refactor - Phase 3: Extract clipboard operations hook
- Extracted clipboard operations from video-editor.tsx into custom hook
- Hook manages transcript and YouTube chapters clipboard functionality
- Implementation details:
  - Created `app/features/video-editor/hooks/use-clipboard-operations.ts` with useClipboardOperations hook
  - Hook provides copyTranscriptToClipboard and copyYoutubeChaptersToClipboard functions
  - Manages isCopied and isChaptersCopied state for user feedback
  - Computes youtubeChapters memoized array from items
  - Removed ~90 lines of clipboard-related code from video-editor.tsx
  - Removed unused isClipSection import from video-editor.tsx
  - Added JSDoc comments for better documentation
- Key decisions:
  - Single hook encapsulates all clipboard-related functionality
  - State management moved to hook for cleaner component code
  - Maintains all existing behavior including 2-second feedback timeout
  - video-editor.tsx reduced from 449 to 382 lines (67 lines saved)
  - Total reduction so far: 1,592 → 382 lines (1,210 lines saved / 76% reduction)
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/hooks/use-clipboard-operations.ts (new file, 95 lines)
  - app/features/video-editor/video-editor.tsx:10-12,134-163 (added import, replaced inline code with hook usage)

## Issue #70 - RFC: Video Editor Context Refactor (Part 1: Core Implementation)
- Implemented two React Contexts using `use-context-selector` for selective subscriptions
- Created ClipStateContext - Route level context for clip state, OBS state, loader data, and actions
- Created VideoStateContext - VideoEditor level context for video playback state and dispatch
- Created 4 shared selector hooks in use-clip-state-selectors.ts:
  - useClips() - Derives clips array from items (used in 10+ places)
  - useCurrentClip() - Derives current clip by combining currentClipId with clips
  - useIsSelected(itemId) - Checks if item is selected
  - useIsCurrentClip(clipId) - Checks if clip is currently playing
- Updated route file (videos.$videoId.edit.tsx):
  - Created stable callbacks with useCallback for all context actions
  - Wrapped VideoEditor with ClipStateContext.Provider
  - Removed all 24 props from VideoEditor invocation
- Updated VideoEditor component (video-editor.tsx):
  - Removed 24 props from component signature (now accepts no props)
  - Added useContextSelector calls to access all ClipStateContext values
  - Wrapped return with VideoStateContext.Provider for video playback state
  - All existing functionality preserved
- Updated useKeyboardShortcuts hook:
  - Removed dispatch parameter
  - Now uses VideoStateContext internally via useContextSelector
- Updated useWebSocket hook:
  - Removed dispatch, onDeleteLatestInsertedClip, and onToggleBeat parameters
  - Now uses VideoStateContext and ClipStateContext internally
- Key decisions:
  - Used inline useContextSelector calls in components (not custom hooks for every value)
  - Only created shared hooks where derived logic exists (useClips, useCurrentClip, etc.)
  - All callbacks wrapped in useCallback for stability
  - Maintained existing behavior - zero functional changes
  - Components still receive props (LiveMediaStream, PreloadableClipManager) - can be migrated later
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/features/video-editor/clip-state-context.ts (new file, 67 lines)
  - app/features/video-editor/video-state-context.ts (new file, 30 lines)
  - app/features/video-editor/hooks/use-clip-state-selectors.ts (new file, 62 lines)
  - app/routes/videos.$videoId.edit.tsx (added context provider, stable callbacks)
  - app/features/video-editor/video-editor.tsx (removed 24 props, added context selectors, wrapped with provider)
  - app/features/video-editor/hooks/use-keyboard-shortcuts.ts (uses context internally)
  - app/features/video-editor/hooks/use-websocket.ts (uses context internally)
- Notes:
  - LiveMediaStream and PreloadableClipManager components still receive props
  - These can be migrated to use context selectors in a follow-up task
  - This foundational work eliminates prop drilling and excessive re-renders
  - Hooks now have stable dependencies, preventing unnecessary re-subscriptions

