## Issue #44 - Sticky clip section headers in video editor
- Added CSS sticky positioning to ClipSectionDivider component
- When scrolling through the timeline, the current section header now sticks to the top of the viewport
- Implementation: Added `sticky top-0 z-10 bg-gray-900` classes to ClipSectionDivider button
- Background color ensures section header obscures content scrolling underneath
- z-index ensures section header stays on top of clips
- Key decision: Used native CSS sticky positioning rather than JavaScript scroll listeners for better performance
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:1465

## Issue #47 - Selective section inclusion in Write Article page
- Added ability to selectively include/exclude clip sections in AI prompts
- Write page now shows section checkboxes (only visible when video has clip sections)
- Each section checkbox shows word count for that section
- Main transcript toggle still works - can turn entire transcript off/on
- Implementation details:
  - Loader calculates word count per section while building transcript
  - Added `sectionsWithWordCount` array with id, name, order, and wordCount
  - Added `enabledSections` state (Set<string>) - defaults to all sections enabled
  - Added ScrollArea with section checkboxes showing name and word count
  - Updated completions endpoint schema to accept `enabledSections: string[]`
  - Updated `acquireTextWritingContext` to accept and filter by `enabledSections`
  - Transcript building now filters clips based on enabled sections
  - Maintains section headers (H2) for enabled sections only
- Key decisions:
  - Used same ASCII ordering logic as video editor for consistency
  - Clips before first section are included if no sections exist or all enabled
  - Section filtering works independently from file selection
  - Word counts calculated in loader to avoid recalculation on every render
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/videos.$videoId.write.tsx (loader, UI, state, handler)
  - app/routes/videos.$videoId.completions.ts (schema, action)
  - app/services/text-writing-agent.ts (acquireTextWritingContext signature and logic)

## Issue #48 - Fixed section checkboxes overflowing into file tree
- Fixed visual bug where section checkboxes were overlapping with files in context
- Changed ScrollArea from `max-h-48` to fixed `h-48` height
- Wrapped ScrollArea in container with `shrink-0` to prevent height collapse
- Key decisions:
  - Fixed height ensures consistent layout and prevents overflow
  - shrink-0 prevents flex container from collapsing the section area
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/videos.$videoId.write.tsx:501-502

## Issue #49 - Transcript checkbox controls section checkboxes
- Implemented parent-child checkbox relationship between transcript and sections
- Transcript checkbox now shows indeterminate state when some sections selected
- Clicking transcript checkbox toggles all section checkboxes
- Implementation details:
  - Transcript checkbox state derived from enabledSections count when sections exist
  - Shows true when all sections enabled, indeterminate when some enabled, false when none
  - Clicking transcript checkbox sets/clears all sections at once
  - Section checkboxes indented with pl-6 to show parent-child relationship visually
  - Submit handler derives includeTranscript from enabledSections when sections exist
- Key decisions:
  - Matches FileTree behavior for nested folder checkboxes (indeterminate state)
  - Maintains backward compatibility for videos without sections (uses includeTranscript state)
  - Visual indentation makes hierarchy clear to users
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/routes/videos.$videoId.write.tsx:483-553

## Issue #50 - Remove smooth scroll when clicking section links in video editor
- Changed scroll behavior from "smooth" to "instant" when clicking section links in sidebar
- When clicking a section in the sidebar, the timeline now scrolls instantly to that section
- Key decision: Changed window.scrollTo behavior property from "smooth" to "instant" for immediate navigation
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:867

## Issue #51 - Fix section scrolling broken by Issue #50
- Fixed regression where clicking section links in sidebar stopped working
- Root cause: Section frontendIds change on every re-render, so getElementById couldn't find the element after dispatch triggered re-render
- Solution: Use section index instead of ID to find elements, since order is stable
- Implementation details:
  - Changed from getElementById with dynamic ID to querySelectorAll with index lookup
  - Wrapped scroll in requestAnimationFrame to wait for React re-render to complete
  - Restored smooth scroll behavior (behavior: "smooth") for better UX
  - Changed block positioning to "center" instead of "start" for better visibility
- Key decisions:
  - Index-based lookup is more robust than ID-based when IDs are unstable
  - requestAnimationFrame ensures DOM is updated before scrolling
  - Smooth scroll provides better user experience than instant scroll
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:850-870

## Issue #50 - Remove smooth scroll when clicking section links (re-implementation)
- Changed scroll behavior from "smooth" to "instant" when clicking section links in sidebar
- When clicking a section in the sidebar, the timeline now scrolls instantly to that section
- This reverses the smooth scroll behavior that was restored in Issue #51
- Key decision: Changed scrollIntoView behavior property from "smooth" to "instant" for immediate navigation as requested in issue #50
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- File changed: app/features/video-editor/video-editor.tsx:866

## Issue #52 - Repo Archiving (Part 1: Database and API infrastructure)
- Added `archived` boolean field to repos table schema (defaults to false)
- Created POST /api/repos/:repoId/archive endpoint to toggle archive status
- Updated `getRepos()` to filter out archived repos (only returns non-archived)
- Added `getArchivedRepos()` query function to fetch archived repos
- Added `updateRepoArchiveStatus()` method to DBService
- Implementation details:
  - Used same pattern as existing clip/clipSection archiving
  - Archive endpoint accepts `{ archived: true|false }` body
  - Database schema change requires `npm run db:push` in production
- Key decisions:
  - Archive field with default false ensures backward compatibility
  - Separate query functions for active vs archived repos keeps code clear
  - Archive is soft delete - repos remain in database
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/db/schema.ts:40 (added archived field)
  - app/services/db-service.ts:930-945 (updated getRepos, added getArchivedRepos)
  - app/services/db-service.ts:1344-1365 (added updateRepoArchiveStatus)
  - app/routes/api.repos.$repoId.archive.ts (new endpoint)

## Issue #52 - Repo Archiving (Part 2: UI implementation)
- Added right-click context menu to repo items in sidebar with "Archive" option
- Created `/archived-repos` page route to display archived repos
- Added "Archived Repos" link to sidebar navigation
- Implementation details:
  - Wrapped repo buttons in ContextMenu with ContextMenuTrigger
  - Added archiveRepoFetcher to submit archive requests
  - Created new archived-repos.tsx route with loader to fetch archived repos
  - Archive page shows repo name and filePath with "Unarchive" button
  - Added Archive icon import from lucide-react
  - Sidebar link placed between Videos collapsible and Diagram Playground
- Key decisions:
  - Used existing ContextMenu pattern from lessons/videos for consistency
  - Archive context menu item submits to /api/repos/:repoId/archive endpoint
  - Unarchive button on archived page sets archived: false via same endpoint
  - Empty state message when no archived repos exist
- All tests pass (21 passed, 1 todo)
- TypeScript typechecks pass
- Files changed:
  - app/routes/_index.tsx:51,267,329-364,410-416 (added Archive icon, archiveRepoFetcher, context menu, sidebar link)
  - app/routes/archived-repos.tsx (new page)