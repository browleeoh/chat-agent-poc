[
  {
    "category": "functional",
    "description": "Version selector displays in sidebar when repo is selected",
    "steps": [
      "Select a repo from the sidebar",
      "Verify version selector dropdown appears below repo list",
      "Check dropdown shows current version name and date",
      "Verify dropdown lists all versions for the repo"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Switching versions updates displayed content",
    "steps": [
      "Select a repo with multiple versions",
      "Note the current sections/lessons displayed",
      "Select a different version from dropdown",
      "Verify URL updates with versionId param",
      "Verify displayed sections/lessons match selected version"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Create new version copies structure from current version",
    "steps": [
      "Select a repo with sections/lessons/videos/clips",
      "Open Actions dropdown",
      "Click 'Create New Version'",
      "Enter version name in modal",
      "Submit and verify new version is created",
      "Verify new version contains same sections/lessons/videos",
      "Verify non-archived clips are copied",
      "Verify archived clips are NOT copied"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "New version tracks references to previous version entities",
    "steps": [
      "Create a new version from existing version",
      "Check database: new sections have previousVersionSectionId set",
      "Check database: new lessons have previousVersionLessonId set",
      "Verify references point to correct source entities"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Repo updates only affect latest version",
    "steps": [
      "Create a repo with version v1.0",
      "Create version v2.0",
      "Trigger repo update via /api/repos/update",
      "Verify changes applied to v2.0 only",
      "Verify v1.0 remains unchanged"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "All versions remain editable",
    "steps": [
      "Select an older version (not latest)",
      "Edit a clip in that version",
      "Verify edit is saved successfully",
      "Switch to latest version",
      "Verify latest version clips unchanged"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Export generates full changelog with all version history",
    "steps": [
      "Create repo with v1.0",
      "Create v1.5 with some changes",
      "Create v2.0 with more changes",
      "Export/publish v2.0",
      "Verify changelog.md created in Dropbox folder",
      "Verify changelog shows v2.0 changes at top",
      "Verify changelog shows v1.5 changes below",
      "Verify changelog shows v1.0 as 'Initial version' at bottom"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Changelog shows version sections in reverse chronological order",
    "steps": [
      "Create multiple versions with different dates",
      "Export latest version",
      "Verify changelog has ## heading for each version",
      "Verify newest version appears first",
      "Verify oldest version appears last"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Changelog detects new lessons per version",
    "steps": [
      "Create v2.0 from v1.0",
      "Add new lesson (no previousVersionLessonId)",
      "Export",
      "Verify new lesson listed under v2.0's '### New Lessons'"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Changelog detects renamed sections/lessons per version",
    "steps": [
      "Create v2.0 from v1.0",
      "Change lesson path in v2.0",
      "Export",
      "Verify rename listed under v2.0's '### Renamed' with old â†’ new format"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Changelog detects content changes via transcript comparison",
    "steps": [
      "Create v2.0 from v1.0",
      "Modify clip transcript text in a lesson",
      "Export",
      "Verify lesson listed under v2.0's '### Content Changes'"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Initial version shows as 'Initial version' in changelog",
    "steps": [
      "Create repo with v1.0 as first version",
      "Create v2.0",
      "Export",
      "Verify v1.0 section shows 'Initial version' without change details"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Versions cannot be deleted",
    "steps": [
      "Select a version",
      "Verify no delete option exists in UI",
      "Verify no delete endpoint exists"
    ],
    "passes": false
  },
  {
    "category": "data",
    "description": "Migration creates v1.0 for existing repos",
    "steps": [
      "Run database migration on existing data",
      "Verify each existing repo has a repoVersion record",
      "Verify version name is 'v1.0'",
      "Verify sections point to repoVersionId instead of repoId"
    ],
    "passes": true
  },
  {
    "category": "data",
    "description": "Cascade deletion works through version hierarchy",
    "steps": [
      "Create a repo with version, sections, lessons, videos, clips",
      "Delete the repo",
      "Verify all versions are deleted",
      "Verify all sections are deleted",
      "Verify all lessons/videos/clips are deleted"
    ],
    "passes": true
  },
  {
    "category": "ui",
    "description": "Version selector shows versions ordered by date descending",
    "steps": [
      "Create multiple versions with different dates",
      "Open version selector dropdown",
      "Verify most recent version appears first",
      "Verify versions are ordered newest to oldest"
    ],
    "passes": true
  },
  {
    "category": "ui",
    "description": "Create version modal validates input",
    "steps": [
      "Open create version modal",
      "Try to submit with empty name",
      "Verify error or submit blocked",
      "Enter valid name",
      "Verify submit succeeds"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "URL reflects selected version",
    "steps": [
      "Select a repo and version",
      "Verify URL contains repoId and versionId params",
      "Copy URL and open in new tab",
      "Verify same repo and version are selected"
    ],
    "passes": true
  },
  {
    "category": "ui",
    "description": "Default to latest version when no versionId in URL",
    "steps": [
      "Navigate to URL with repoId but no versionId",
      "Verify latest version is automatically selected",
      "Verify version selector shows latest version"
    ],
    "passes": true
  }
]
