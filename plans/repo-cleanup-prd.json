[
  {
    "category": "refactor",
    "description": "Rename api.repos.publish.ts to api.repos.publish-to-dropbox.ts",
    "steps": [
      "Rename app/routes/api.repos.publish.ts to app/routes/api.repos.publish-to-dropbox.ts",
      "Update action reference in _index.tsx from /api/repos/publish to /api/repos/publish-to-dropbox",
      "Run pnpm typecheck to verify no errors",
      "Verify Dropbox publishing still works by triggering publish action"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Extract db-service errors to separate file",
    "steps": [
      "Create app/services/db-service-errors.ts",
      "Move NotFoundError, UnknownDBServiceError, NotLatestVersionError, CannotDeleteOnlyVersionError, CannotDeleteNonLatestVersionError to new file",
      "Export all errors from new file",
      "Update imports in db-service.ts",
      "Update any other files importing these errors from db-service.ts",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Convert appendClips to object-based arguments",
    "steps": [
      "Change appendClips(videoId, insertionPoint, inputClips) to appendClips({videoId, insertionPoint, clips})",
      "Update all callers of appendClips",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert createSections to object-based arguments",
    "steps": [
      "Change createSections(repoId, newSections, repoVersionId?) to createSections({repoId, sections, repoVersionId?})",
      "Update all callers of createSections",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert updateRepoVersionName to object-based arguments",
    "steps": [
      "Change updateRepoVersionName(versionId, name) to updateRepoVersionName({versionId, name})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Convert updateRepoName to object-based arguments",
    "steps": [
      "Change updateRepoName(repoId, name) to updateRepoName({repoId, name})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Convert getRepoWithSectionsByVersion to object-based arguments",
    "steps": [
      "Change getRepoWithSectionsByVersion(repoId, versionId) to getRepoWithSectionsByVersion({repoId, versionId})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "cleanup",
    "description": "Remove unused next-themes dependency",
    "steps": [
      "Run pnpm remove next-themes",
      "Verify no imports of next-themes exist in codebase",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Update existing error handling to Effect.die(data(...)) pattern",
    "steps": [
      "Pattern: use Effect.die(data(..., { status: xxx })) instead of Effect.succeed(new Response(...))",
      "Import { data } from 'react-router' in each route",
      "Update api.repos.add.ts",
      "Update api.repos.update.ts",
      "Update api.repos.publish.ts",
      "Update api.repos.$repoId.create-version.ts",
      "Update api.repos.$repoId.delete-version.ts",
      "Update api.repos.$repoId.clear-video-files.ts",
      "Update api.repos.migrate-to-versions.ts",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  },
  {
    "category": "refactor",
    "description": "Add error handling to routes missing it (24 files)",
    "steps": [
      "Pattern: use Effect.catchTags for known errors, Effect.catchAll as fallback",
      "Pattern: use Effect.die(data(..., { status: xxx }))",
      "Import { data } from 'react-router' in each route",
      "Add to: _index.tsx",
      "Add to: api.repos.$repoId.rename-repo.ts",
      "Add to: api.repos.$repoId.rename-version.ts",
      "Add to: api.repos.$repoId.export-all.ts",
      "Add to: api.repos.$repoId.export-unexported.ts",
      "Add to: api.videos.$videoId.export.ts",
      "Add to: api.videos.delete.ts",
      "Add to: api.videos.edit-latest-obs-video.ts",
      "Add to: api.lessons.delete.ts",
      "Add to: api.lessons.$lessonId.add-video.ts",
      "Add to: api.lessons.$lessonId.update-name.ts",
      "Add to: api.write-readme.ts",
      "Add to: videos.$videoId.edit.tsx",
      "Add to: videos.$videoId.ts",
      "Add to: videos.$videoId.write.tsx",
      "Add to: videos.$videoId.append-from-obs.ts",
      "Add to: videos.$videoId.completions.ts",
      "Add to: videos.$videoId.export-to-davinci-resolve.ts",
      "Add to: clips.$clipId.first-frame.ts",
      "Add to: clips.$clipId.last-frame.ts",
      "Add to: clips.update.ts",
      "Add to: clips.update-beat.ts",
      "Add to: clips.transcribe.ts",
      "Add to: clips.archive.ts",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  }
]
