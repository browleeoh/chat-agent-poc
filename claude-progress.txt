## 2026-01-01: Clone database to local Docker script

Created script to clone production database to a local Docker container for migration testing. This allows safe testing of migrations before running on production.

Changes:
- scripts/clone-db-to-local.sh: New script that creates/starts Docker PostgreSQL container, dumps prod, restores to local
- package.json: Added db:clone-local script

Usage:
- pnpm db:clone-local
- Clones to localhost:5433 with password "localpassword"

## 2026-01-01: Repo updates only affect latest version

Modified the repo update API to only modify sections/lessons in the latest version. When a repo is updated via /api/repos/update, the system now fetches only the latest version's sections and creates new sections with the correct repoVersionId. Older versions remain untouched.

Changes:
- app/services/db-service.ts: Added getRepoWithSectionsByVersion to fetch repo sections filtered by version
- app/routes/api.repos.update.ts: Get latest version first, filter sections by version, pass repoVersionId to createSections

## 2026-01-01: Backend rejects creating version from non-latest version

Added backend validation to prevent creating new versions from non-latest versions. This ensures data integrity even if the UI fails to hide the option.

Changes:
- app/services/db-service.ts: Added NotLatestVersionError, validation in copyVersionStructure that checks sourceVersionId is latest
- app/routes/api.repos.$repoId.create-version.ts: Handle NotLatestVersionError with 400 response

## 2026-01-01: Create Version visibility based on latest version

Added `isLatestVersion` flag to loader that compares selected version ID with the first (latest) version in the list. The "Create New Version" dropdown option now only shows when viewing the latest version.

Changes:
- app/routes/_index.tsx: Added isLatestVersion calculation in loader, conditional render of Create New Version menu item
